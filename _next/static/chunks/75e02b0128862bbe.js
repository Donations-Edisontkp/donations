(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40651,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566);function a({campaign:e,isEdit:a}){let i=(0,r.useRouter)(),[l,n]=(0,s.useState)(!1),[c,o]=(0,s.useState)(null),[d,g]=(0,s.useState)({title:e?.title||"",slug:e?.slug||"",description:e?.description||"",goalAmount:e?.goalAmount?.toString()||"",currency:e?.currency||"USD",isActive:e?.isActive??!0});(0,s.useEffect)(()=>{a||!d.title||e?.slug||g(e=>({...e,slug:e.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}))},[d.title,a,e?.slug]);let u=async t=>{t.preventDefault(),n(!0),o(null);try{let t=a?`/api/campaigns/${e?.id}`:"/api/campaigns",s=await fetch(t,{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...d,goalAmount:parseFloat(d.goalAmount)})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to save campaign")}i.push("/admin/campaigns"),i.refresh()}catch(e){o(e instanceof Error?e.message:"An error occurred")}finally{n(!1)}};return(0,t.jsxs)("form",{onSubmit:u,className:"space-y-6 max-w-2xl",children:[c&&(0,t.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:c}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,t.jsx)("input",{type:"text",id:"title",value:d.title,onChange:e=>g({...d,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),(0,t.jsx)("input",{type:"text",id:"slug",value:d.slug,onChange:e=>g({...d,slug:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",pattern:"[a-z0-9-]+",title:"Only lowercase letters, numbers, and hyphens",required:!0}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"URL-friendly identifier (lowercase letters, numbers, hyphens only)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,t.jsx)("textarea",{id:"description",value:d.description,onChange:e=>g({...d,description:e.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"goalAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal Amount *"}),(0,t.jsx)("input",{type:"number",id:"goalAmount",value:d.goalAmount,onChange:e=>g({...d,goalAmount:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"1",step:"0.01",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,t.jsxs)("select",{id:"currency",value:d.currency,onChange:e=>g({...d,currency:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"USD",children:"USD"}),(0,t.jsx)("option",{value:"EUR",children:"EUR"}),(0,t.jsx)("option",{value:"GBP",children:"GBP"}),(0,t.jsx)("option",{value:"CAD",children:"CAD"}),(0,t.jsx)("option",{value:"AUD",children:"AUD"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isActive",checked:d.isActive,onChange:e=>g({...d,isActive:e.target.checked}),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,t.jsx)("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Active (accepting donations)"})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Saving...":a?"Update Campaign":"Create Campaign"}),(0,t.jsx)("button",{type:"button",onClick:()=>i.back(),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"})]})]})}e.s(["default",()=>a])},19491,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(40651);function i(){let e=(0,r.useParams)(),i=(0,r.useRouter)(),l=e.id,[n,c]=(0,s.useState)(null),[o,d]=(0,s.useState)(!0);if((0,s.useEffect)(()=>{async function e(){try{let e=await fetch(`/api/campaigns/${l}`,{credentials:"include"});if(!e.ok)return void i.push("/admin/campaigns");let t=await e.json();c({id:t.campaign.id,title:t.campaign.title,slug:t.campaign.slug,description:t.campaign.description,goalAmount:Number(t.campaign.goalAmount),currency:t.campaign.currency,isActive:t.campaign.isActive})}catch{i.push("/admin/campaigns")}finally{d(!1)}}l&&e()},[l,i]),o)return(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading..."})});if(!n)return null;let g=window.location.origin;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Campaign"}),(0,t.jsx)(a.default,{campaign:n,isEdit:!0}),(0,t.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Embed Codes"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Copy these snippets to embed widgets on external sites."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Donation Form Widget"}),(0,t.jsx)("code",{className:"block p-3 bg-gray-100 rounded text-sm text-gray-800 overflow-x-auto",children:`<script src="${g}/embed.js" data-campaign-slug="${n.slug}" data-widget="form"></script>`})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Progress Widget"}),(0,t.jsx)("code",{className:"block p-3 bg-gray-100 rounded text-sm text-gray-800 overflow-x-auto",children:`<script src="${g}/embed.js" data-campaign-slug="${n.slug}" data-widget="progress"></script>`})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Top Donors Widget"}),(0,t.jsx)("code",{className:"block p-3 bg-gray-100 rounded text-sm text-gray-800 overflow-x-auto",children:`<script src="${g}/embed.js" data-campaign-slug="${n.slug}" data-widget="donors"></script>`})]})]}),(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Direct Links"}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Public Donate Page: "}),(0,t.jsxs)("a",{href:`${g}/donate/${n.slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700",children:[g,"/donate/",n.slug]})]})})]})]})]})}e.s(["default",()=>i])}]);