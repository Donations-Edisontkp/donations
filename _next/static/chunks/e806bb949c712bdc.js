(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34425,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(71645),s=e.i(18566);function n({donations:e,showCampaign:a=!0}){return 0===e.length?(0,t.jsx)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No donations found"})}):(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[a&&(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Donor"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{let s,n;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[a&&(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.campaign?.title||"Unknown"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.donorName})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.donorEmail})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(s=e.amount,n=e.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:n}).format(Number(s)))}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"text-sm text-gray-500 capitalize",children:e.paymentMethod})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${(e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:e.status})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},e.id)})})]})})}function r(){let e=(0,s.useSearchParams)(),r=(0,s.useRouter)(),i=e.get("campaignId"),l=e.get("status"),d=e.get("page")||"1",[c,o]=(0,a.useState)([]),[x,m]=(0,a.useState)([]),[p,g]=(0,a.useState)(0),[u,h]=(0,a.useState)(0),[y,f]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{!async function(){try{let e=new URLSearchParams;i&&e.append("campaignId",i),l&&e.append("status",l),e.append("page",d),e.append("limit","20");let t="/api",a=await fetch(`${t}/donations?${e}`,{credentials:"include"});if(a.ok){let e=await a.json();o(e.donations||[]),g(e.pagination?.total||0),h(e.pagination?.totalPages||0)}let s=await fetch(`${t}/campaigns?limit=1000`,{credentials:"include"});if(s.ok){let e=await s.json();m(e.campaigns||[])}}catch(e){console.error("Failed to fetch data:",e)}finally{f(!1)}}()},[i,l,d]),y)?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading..."})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Donations"}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new FormData(e.currentTarget),a=new URLSearchParams,s=t.get("campaignId"),n=t.get("status");s&&a.set("campaignId",s),n&&a.set("status",n),a.set("page","1"),r.push(`/admin/donations?${a.toString()}`)},className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"campaignId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign"}),(0,t.jsxs)("select",{id:"campaignId",name:"campaignId",defaultValue:i||"",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Campaigns"}),x.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,t.jsxs)("select",{id:"status",name:"status",defaultValue:l||"",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Statuses"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"completed",children:"Completed"}),(0,t.jsx)("option",{value:"failed",children:"Failed"}),(0,t.jsx)("option",{value:"refunded",children:"Refunded"})]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Filter"})})]})}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing ",c.length," of ",p," donations"]}),(0,t.jsx)(n,{donations:c}),u>1&&(0,t.jsx)("div",{className:"flex justify-center gap-2",children:Array.from({length:u},(e,t)=>t+1).map(e=>{let a=new URLSearchParams;return i&&a.set("campaignId",i),l&&a.set("status",l),a.set("page",e.toString()),(0,t.jsx)("a",{href:`?${a.toString()}`,className:`px-3 py-1 rounded ${e===parseInt(d)?"bg-green-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:e},e)})})]})}function i(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading..."})}),children:(0,t.jsx)(r,{})})}e.s(["default",()=>i],34425)}]);