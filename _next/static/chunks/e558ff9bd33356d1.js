(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40651,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(18566);function a({campaign:e,isEdit:a}){let l=(0,s.useRouter)(),[n,i]=(0,t.useState)(!1),[o,c]=(0,t.useState)(null),[d,u]=(0,t.useState)({title:e?.title||"",slug:e?.slug||"",description:e?.description||"",goalAmount:e?.goalAmount?.toString()||"",currency:e?.currency||"USD",isActive:e?.isActive??!0});(0,t.useEffect)(()=>{a||!d.title||e?.slug||u(e=>({...e,slug:e.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}))},[d.title,a,e?.slug]);let g=async r=>{r.preventDefault(),i(!0),c(null);try{let r=a?`/api/campaigns/${e?.id}`:"/api/campaigns",t=await fetch(r,{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...d,goalAmount:parseFloat(d.goalAmount)})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to save campaign")}l.push("/admin/campaigns"),l.refresh()}catch(e){c(e instanceof Error?e.message:"An error occurred")}finally{i(!1)}};return(0,r.jsxs)("form",{onSubmit:g,className:"space-y-6 max-w-2xl",children:[o&&(0,r.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:o}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,r.jsx)("input",{type:"text",id:"title",value:d.title,onChange:e=>u({...d,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),(0,r.jsx)("input",{type:"text",id:"slug",value:d.slug,onChange:e=>u({...d,slug:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",pattern:"[a-z0-9-]+",title:"Only lowercase letters, numbers, and hyphens",required:!0}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"URL-friendly identifier (lowercase letters, numbers, hyphens only)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,r.jsx)("textarea",{id:"description",value:d.description,onChange:e=>u({...d,description:e.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"goalAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal Amount *"}),(0,r.jsx)("input",{type:"number",id:"goalAmount",value:d.goalAmount,onChange:e=>u({...d,goalAmount:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"1",step:"0.01",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,r.jsxs)("select",{id:"currency",value:d.currency,onChange:e=>u({...d,currency:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"USD",children:"USD"}),(0,r.jsx)("option",{value:"EUR",children:"EUR"}),(0,r.jsx)("option",{value:"GBP",children:"GBP"}),(0,r.jsx)("option",{value:"CAD",children:"CAD"}),(0,r.jsx)("option",{value:"AUD",children:"AUD"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"isActive",checked:d.isActive,onChange:e=>u({...d,isActive:e.target.checked}),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,r.jsx)("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Active (accepting donations)"})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Saving...":a?"Update Campaign":"Create Campaign"}),(0,r.jsx)("button",{type:"button",onClick:()=>l.back(),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"})]})]})}e.s(["default",()=>a])}]);